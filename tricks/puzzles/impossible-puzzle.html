<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EchoMind - Impossible Puzzle</title>
  <link rel="stylesheet" href="../../css/styles.css">
  <style>
    .trick-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .puzzle-container {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 20px;
      margin: 30px 0;
      text-align: center;
    }
    
    .puzzle-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      max-width: 300px;
      margin: 20px auto;
    }
    
    .puzzle-cell {
      background: rgba(255,255,255,0.2);
      border: 1px solid #6032a8;
      border-radius: 5px;
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }
    
    .puzzle-cell:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.05);
    }
    
    .puzzle-cell.selected {
      background: #6032a8;
      border-color: #9966ff;
    }
    
    .solution-section {
      text-align: center;
      margin: 30px 0;
      padding: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      display: none;
    }
    
    .controls {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin: 20px 0;
    }
    
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background: #4a2080;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    button:hover {
      background: #6032a8;
    }
    
    button:disabled {
      background: #333;
      cursor: not-allowed;
    }
    
    .back-button {
      display: inline-block;
      background-color: #6032a8;
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: bold;
      margin-top: 20px;
      transition: background-color 0.3s;
    }
    
    .back-button:hover {
      background-color: #7944d4;
    }
    
    .error-message {
      color: #ff4444;
      text-align: center;
      margin: 20px 0;
      padding: 10px;
      background: rgba(255,0,0,0.1);
      border-radius: 5px;
      display: none;
    }
    
    .hint {
      color: #b88eff;
      font-style: italic;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="trick-container">
    <h1>Impossible Puzzle</h1>
    <p>Can you solve this seemingly impossible puzzle? Select three numbers that add up to 15...</p>
    
    <div class="error-message" id="errorMessage">
      Your browser doesn't support this feature. Please try a modern browser.
    </div>
    
    <div class="puzzle-container">
      <h2>The Puzzle</h2>
      <p>Select three numbers that add up to exactly 15.</p>
      <p class="hint">Hint: The solution is not what it seems...</p>
      
      <div class="puzzle-grid" id="puzzleGrid">
        <div class="puzzle-cell" data-value="4">4</div>
        <div class="puzzle-cell" data-value="9">9</div>
        <div class="puzzle-cell" data-value="2">2</div>
        <div class="puzzle-cell" data-value="3">3</div>
        <div class="puzzle-cell" data-value="5">5</div>
        <div class="puzzle-cell" data-value="7">7</div>
        <div class="puzzle-cell" data-value="8">8</div>
        <div class="puzzle-cell" data-value="1">1</div>
        <div class="puzzle-cell" data-value="6">6</div>
      </div>
      
      <p>Selected sum: <span id="currentSum">0</span></p>
    </div>
    
    <div class="solution-section" id="solutionSection">
      <h2>Incredible Solution!</h2>
      <p>The numbers you selected: <span id="selectedNumbers"></span></p>
      <p>Not only do they add up to 15, but they also form a magic square pattern!</p>
      <p>Every row, column, and diagonal in the grid adds up to 15.</p>
    </div>
    
    <div class="controls">
      <button id="checkBtn" disabled>Check Solution</button>
      <button id="resetBtn">Reset</button>
      <button id="hintBtn">Get Hint</button>
    </div>
    
    <a href="../index.html" class="back-button">‚Üê Back to Tricks Menu</a>
  </div>

  <script>
    let selectedCells = [];
    let currentSum = 0;
    let hints = [
      "Try thinking in patterns rather than just numbers...",
      "Notice anything special about the grid layout?",
      "What if the solution involves more than just addition?",
      "Think about classic mathematical puzzles...",
      "Have you heard of a magic square?"
    ];
    let currentHint = 0;
    
    function selectCell(cell) {
      const value = parseInt(cell.dataset.value);
      
      if (cell.classList.contains('selected')) {
        cell.classList.remove('selected');
        selectedCells = selectedCells.filter(c => c !== cell);
        currentSum -= value;
      } else if (selectedCells.length < 3) {
        cell.classList.add('selected');
        selectedCells.push(cell);
        currentSum += value;
      } else {
        alert('You can only select three numbers!');
        return;
      }
      
      document.getElementById('currentSum').textContent = currentSum;
      document.getElementById('checkBtn').disabled = selectedCells.length !== 3;
    }
    
    function checkSolution() {
      if (currentSum !== 15) {
        alert('The numbers must add up to exactly 15!');
        return;
      }
      
      const values = selectedCells.map(cell => parseInt(cell.dataset.value));
      document.getElementById('selectedNumbers').textContent = values.join(', ');
      document.getElementById('solutionSection').style.display = 'block';
    }
    
    function showHint() {
      alert(hints[currentHint]);
      currentHint = (currentHint + 1) % hints.length;
    }
    
    function resetPuzzle() {
      selectedCells = [];
      currentSum = 0;
      document.getElementById('currentSum').textContent = '0';
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('solutionSection').style.display = 'none';
      document.querySelectorAll('.puzzle-cell').forEach(cell => {
        cell.classList.remove('selected');
      });
    }
    
    // Initialize
    document.querySelectorAll('.puzzle-cell').forEach(cell => {
      cell.onclick = () => selectCell(cell);
    });
    
    document.getElementById('checkBtn').onclick = checkSolution;
    document.getElementById('resetBtn').onclick = resetPuzzle;
    document.getElementById('hintBtn').onclick = showHint;
  </script>
</body>
</html> 